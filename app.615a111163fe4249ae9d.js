!function(e){function t(t){for(var a,i,c=t[0],s=t[1],l=t[2],m=0,p=[];m<c.length;m++)i=c[m],r[i]&&p.push(r[i][0]),r[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);for(u&&u(t);p.length;)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,c=1;c<n.length;c++){var s=n[c];0!==r[s]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={1:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;o.push([353,0,3]),n()}({130:function(e,t,n){"use strict";n.d(t,"b",function(){return d});var a=n(19),r=n.n(a),o=n(29),i=n.n(o),c=n(9),s=n.n(c),l=n(23),u=n(34),m="FETCH_RECORD",p=s()({},m,Object(l.a)(function(e,t){e.records=t.records,e.ratings=t.ratings,e.gameResult=t.gameResult}));function d(e){return function(){var t=i()(r.a.mark(function t(n){var a,o,i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.fetchRecordByGame(e);case 2:return a=t.sent,t.next=5,u.a.fetchRating(e);case 5:o=t.sent,i=a.reduce(function(e,t){return e.concat(t.gameResult)},[]),n({type:m,records:a,gameResult:i,ratings:o});case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}var f={records:[],gameResult:[],ratings:[]};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,n=p[t.type];return n?n(e,t):e}},135:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(1),i=n.n(o),c=n(3),s=function(e){var t=e.value,n=e.games,a=e.onChange;return r.a.createElement(c.h,{style:{minWidth:120}},r.a.createElement(c.l,null,"게임선택"),r.a.createElement(c.r,{value:t,onChange:a},n.map(function(e){return r.a.createElement(c.p,{value:e.originalName,key:e.name},e.name)})))};s.propTypes={value:i.a.string,games:i.a.array,onChange:i.a.func};var l=s;n.d(t,"a",function(){return l})},188:function(e,t,n){var a={"./ko":92,"./ko.js":92};function r(e){var t=o(e);return n(t)}function o(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=188},193:function(e,t,n){"use strict";n(72),n(5),n(6),n(36).a.collection("rating")},34:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var a=n(19),r=n.n(a),o=n(72),i=n.n(o),c=n(29),s=n.n(c),l=n(5),u=n.n(l),m=n(6),p=n.n(m),d=n(36),f=d.a.collection("games"),h=d.b.ref(),g=d.a.batch(),y=function(){function e(){u()(this,e)}return p()(e,null,[{key:"addGame",value:function(){var e=s()(r.a.mark(function e(t,n){var a,o,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.name.split(".").pop(),e.next=3,h.child("".concat(t.originalName,".").concat(a)).put(n);case 3:return o=e.sent,e.next=6,o.ref.getDownloadURL();case 6:c=e.sent,f.doc(t.originalName).set(i()({},t,{thumbnail:c,createdAt:getTime()}));case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchGames",value:function(){return f.get().then(function(e){return e.docs.map(function(e){return e.data()})})}},{key:"updateClan",value:function(e,t){return f.doc(e).update({clans:t})}},{key:"recordGame",value:function(e){var t=getTime();return e.createAt=t,f.doc(e.game).collection("records").doc("".concat(t,":").concat(e.gameResult[0].name)).set(e)}},{key:"fetchGameByName",value:function(e){return f.doc(e).get()}},{key:"fetchRecordByGame",value:function(e){return f.doc(e).collection("records").get().then(function(e){return e.docs.map(function(e){return e.data()})})}},{key:"fetchRating",value:function(e){return f.doc(e).collection("ratings").get().then(function(e){return e.docs.map(function(e){return e.data()})})}},{key:"updateRating",value:function(e,t){return t.map(function(t){var n=f.doc(e).collection("ratings").doc(t.name);g.set(n,t)}),g.commit()}}]),e}()},353:function(e,t,n){e.exports=n(677)},36:function(e,t,n){"use strict";n.d(t,"b",function(){return i});var a=n(136),r=n.n(a);n(374),n(377);r.a.initializeApp({apiKey:"AIzaSyBmj3aW-4U8Xfv9g0KE5YVlWmn2aPr_s_g",authDomain:"boke-history.firebaseapp.com",databaseURL:"https://boke-history.firebaseio.com",projectId:"boke-history",storageBucket:"boke-history.appspot.com",messagingSenderId:"1043933582113"});var o=r.a.firestore(),i=r.a.storage();o.settings({timestampsInSnapshots:!0}),t.a=o},40:function(e,t,n){"use strict";n.d(t,"b",function(){return h}),n.d(t,"d",function(){return g}),n.d(t,"c",function(){return y});var a,r=n(9),o=n.n(r),i=n(19),c=n.n(i),s=n(29),l=n.n(s),u=n(23),m=n(34),p=(n(193),"FETCH_GAMES"),d="SELECT_GAME",f="RESET_GAME";function h(){return function(){var e=l()(c.a.mark(function e(t){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.fetchGames();case 2:n=e.sent,t({type:p,games:n});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}function g(e){return{type:d,gameName:e}}function y(){return{type:f}}var v=(a={},o()(a,p,Object(u.a)(function(e,t){e.games=t.games})),o()(a,d,Object(u.a)(function(e,t){e.game=e.games.find(function(e){return e.originalName===t.gameName})})),o()(a,f,Object(u.a)(function(e,t){e.game=null})),a),b={games:[],game:null};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0,n=v[t.type];return n?n(e,t):e}},509:function(e,t,n){var a=n(510);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(82)(a,r);a.locals&&(e.exports=a.locals)},510:function(e,t,n){(e.exports=n(81)(!1)).push([e.i,"/*\nApplication Settings Go Here\n------------------------------------\nThis file acts as a bundler for all variables/mixins/themes, so they\ncan easily be swapped out without `core.scss` ever having to know.\n\nFor example:\n\n@import './variables/colors';\n@import './variables/components';\n@import './themes/default';\n*/\n.loading-view {\n  display: inline-block;\n  width: 50px;\n  color: transparent !important;\n  pointer-events: none;\n  margin: 0; }\n.loading-view:after {\n    -webkit-animation: spinAround 500ms infinite linear;\n    animation: spinAround 500ms infinite linear;\n    border: 2px solid #f00;\n    border-radius: 1em;\n    border-right-color: transparent;\n    border-top-color: transparent;\n    content: \"\";\n    display: block;\n    height: 1em;\n    width: 1em;\n    margin-left: calc(50% - 0.5em);\n    margin-top: -1em; }\n.loading-view-container {\n  padding: 24px;\n  text-align: center; }\n.font-color-text-light {\n  color: #858585; }\n@media screen and (max-width: 850px) {\n  .hide-when-w-850 {\n    display: none !important; }\n  .show-when-w-850 {\n    display: block !important; } }\n@media screen and (max-width: 768px) {\n  .hide-when-w-768 {\n    display: none !important; } }\n@media screen and (min-width: 850px) {\n  .hide-when-w-over-850 {\n    display: none !important; } }\n@media screen and (max-height: 680px) {\n  .hide-when-h-680 {\n    display: none !important; } }\nhtml {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box; }\na {\n  text-decoration: none !important; }\na:hover {\n    color: white;\n    text-decoration: none;\n    cursor: pointer; }\nhtml,\nbody {\n  margin: 0;\n  padding: 0; }\n*,\n*:before,\n*:after {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box; }\n",""])},519:function(e,t,n){var a=n(520);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(82)(a,r);a.locals&&(e.exports=a.locals)},520:function(e,t,n){(e.exports=n(81)(!1)).push([e.i,".game-history .warning {\n  color: red; }\n\n.game-history .submit-btn {\n  margin: 10px 0; }\n",""])},521:function(e,t,n){var a=n(522);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(82)(a,r);a.locals&&(e.exports=a.locals)},522:function(e,t,n){(e.exports=n(81)(!1)).push([e.i,".game-history .warning {\n  color: red; }\n\n.game-history .submit-btn {\n  margin: 10px 0; }\n",""])},620:function(e,t,n){var a=n(621);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(82)(a,r);a.locals&&(e.exports=a.locals)},621:function(e,t,n){(e.exports=n(81)(!1)).push([e.i,".recode-game .warning {\n  color: red; }\n\n.recode-game .score-record-box {\n  margin: 12px 0; }\n\n.recode-game .score-record-box .record-input {\n    margin-right: 12px; }\n",""])},622:function(e,t,n){var a=n(623);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(82)(a,r);a.locals&&(e.exports=a.locals)},623:function(e,t,n){(e.exports=n(81)(!1)).push([e.i,".boke-game-list {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap; }\n  .boke-game-list .game-card {\n    min-width: 200px;\n    margin: 10px; }\n",""])},676:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(134),i=n(125),c=n(31),s=n(5),l=n.n(s),u=n(6),m=n.n(u),p=n(4),d=n.n(p),f=n(10),h=n.n(f),g=n(11),y=n.n(g),v=n(1),b=n.n(v),E=n(17),w=n(33),x=n.n(w),k=(n(168),n(69)),C=n.n(k),R=n(70),_=n.n(R),S=n(18),N=n.n(S),j=n(67),P=n.n(j),O=n(47),G=n.n(O),A=n(68),T=n.n(A);function M(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}var F=[{id:"rating",numeric:!0,disablePadding:!1,label:"MMR"},{id:"average",numeric:!0,disablePadding:!1,label:"평균"},{id:"winRate",numeric:!0,disablePadding:!1,label:"승률"},{id:"playCount",numeric:!0,disablePadding:!1,label:"게임수"}],z=function(e){function t(){var e,n,a;l()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return d()(a,(n=a=d()(this,(e=h()(t)).call.apply(e,[this].concat(o))),a.createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},n))}return y()(t,e),m()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.order,a=t.orderBy;return r.a.createElement(P.a,null,r.a.createElement(G.a,null,r.a.createElement(N.a,{padding:"checkbox"},"순위"),r.a.createElement(N.a,{padding:"dense"},"이름"),F.map(function(t,o){return r.a.createElement(N.a,{key:o,numeric:t.numeric,padding:t.disablePadding?"none":"default",sortDirection:a===t.id&&n},r.a.createElement(T.a,{active:a===t.id,direction:n,onClick:e.createSortHandler(t.id)},t.label))},this)))}}]),t}(r.a.Component);z.propTypes={onRequestSort:b.a.func.isRequired,order:b.a.string.isRequired,orderBy:b.a.string.isRequired};var q=function(e){function t(){var e,n,a;l()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return d()(a,(n=a=d()(this,(e=h()(t)).call.apply(e,[this].concat(o))),a.state={order:"desc",orderBy:"rating"},a.handleRequestSort=function(e,t){var n=t,r="desc";a.state.orderBy===t&&"desc"===a.state.order&&(r="asc"),a.setState({order:r,orderBy:n})},n))}return y()(t,e),m()(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.gameResult,a=this.state,o=a.order,i=a.orderBy;return r.a.createElement(x.a,{className:t.root},r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(C.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(z,{order:o,orderBy:i,onRequestSort:this.handleRequestSort}),r.a.createElement(_.a,null,function(e,t){var n=e.map(function(e,t){return[e,t]});return n.sort(function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]}),n.map(function(e){return e[0]})}(n,function(e,t){return"desc"===e?function(e,n){return M(e,n,t)}:function(e,n){return-M(e,n,t)}}(o,i)).map(function(e,t){return r.a.createElement(G.a,{hover:!0,key:t},r.a.createElement(N.a,{component:"th",padding:"none",style:{textAlign:"center"}},t+1),r.a.createElement(N.a,{component:"th",padding:"none"},e.name),r.a.createElement(N.a,{numeric:!0},e.rating),r.a.createElement(N.a,{numeric:!0},e.average.toFixed(2)),r.a.createElement(N.a,{numeric:!0},e.winRate.toFixed(2),"%"),r.a.createElement(N.a,{numeric:!0},e.playCount))})))))}}]),t}(r.a.Component);q.propTypes={classes:b.a.object.isRequired};var B=Object(E.withStyles)(function(e){return{root:{width:"100%"},tableWrapper:{overflowX:"auto"}}})(q);function D(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}var I=[{id:"score",numeric:!0,disablePadding:!1,label:"승점"},{id:"scorePercent",numeric:!0,disablePadding:!1,label:"승점%"},{id:"winRate",numeric:!0,disablePadding:!1,label:"승%"},{id:"first",numeric:!0,disablePadding:!1,label:"승"},{id:"second",numeric:!0,disablePadding:!1,label:"2"},{id:"third",numeric:!0,disablePadding:!1,label:"3"},{id:"fourth",numeric:!0,disablePadding:!1,label:"4"},{id:"playCount",numeric:!0,disablePadding:!1,label:"국수"}],H=function(e){function t(){var e,n,a;l()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return d()(a,(n=a=d()(this,(e=h()(t)).call.apply(e,[this].concat(o))),a.createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},n))}return y()(t,e),m()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.order,a=t.orderBy;return r.a.createElement(P.a,null,r.a.createElement(G.a,null,r.a.createElement(N.a,{padding:"checkbox"},"순위"),r.a.createElement(N.a,{padding:"dense"},"이름"),I.map(function(t,o){return r.a.createElement(N.a,{key:o,numeric:t.numeric,padding:t.disablePadding?"none":"default",sortDirection:a===t.id&&n},r.a.createElement(T.a,{active:a===t.id,direction:n,onClick:e.createSortHandler(t.id)},t.label))},this)))}}]),t}(r.a.Component);H.propTypes={onRequestSort:b.a.func.isRequired,order:b.a.string.isRequired,orderBy:b.a.string.isRequired};var U=function(e){function t(){var e,n,a;l()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return d()(a,(n=a=d()(this,(e=h()(t)).call.apply(e,[this].concat(o))),a.state={order:"desc",orderBy:"score"},a.handleRequestSort=function(e,t){var n=t,r="desc";a.state.orderBy===t&&"desc"===a.state.order&&(r="asc"),a.setState({order:r,orderBy:n})},n))}return y()(t,e),m()(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.gameResult,a=this.state,o=a.order,i=a.orderBy;return r.a.createElement(x.a,{className:t.root},r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(C.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(H,{order:o,orderBy:i,onRequestSort:this.handleRequestSort}),r.a.createElement(_.a,null,function(e,t){var n=e.map(function(e,t){return[e,t]});return n.sort(function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]}),n.map(function(e){return e[0]})}(n,function(e,t){return"desc"===e?function(e,n){return D(e,n,t)}:function(e,n){return-D(e,n,t)}}(o,i)).map(function(e,t){return r.a.createElement(G.a,{hover:!0,key:t},r.a.createElement(N.a,{component:"th",padding:"none",style:{textAlign:"center"}},t+1),r.a.createElement(N.a,{component:"th",padding:"none"},e.name),r.a.createElement(N.a,{numeric:!0},e.score.toFixed(2)),r.a.createElement(N.a,{numeric:!0},e.scorePercent.toFixed(2)),r.a.createElement(N.a,{numeric:!0},e.winRate.toFixed(2),"%"),r.a.createElement(N.a,{numeric:!0},e.first),r.a.createElement(N.a,{numeric:!0},e.second),r.a.createElement(N.a,{numeric:!0},e.third),r.a.createElement(N.a,{numeric:!0},e.fourth),r.a.createElement(N.a,{numeric:!0},e.playCount))})))))}}]),t}(r.a.Component);U.propTypes={classes:b.a.object.isRequired};var W=Object(E.withStyles)(function(e){return{root:{width:"100%"},tableWrapper:{overflowX:"auto"}}})(U),L=function(e){function t(){var e,n,a;l()(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return d()(a,(n=a=d()(this,(e=h()(t)).call.apply(e,[this].concat(i))),a._calculateGameResult=function(){var e=a.props,t=e.ratings,n=e.gameResult,r=e.game,o=n.reduce(function(e,t){return e.hasOwnProperty(t.name)||(e[t.name]=[]),e[t.name].push(t),e},{});return"mahjong"===r.type?Object.keys(o).map(function(e){var t=o[e],n=t.reduce(function(e,t){var n=0;return 1===t.rank&&(n=20),1===t.rank&&(n=10),1===t.rank&&(n=-10),1===t.rank&&(n=-20),e+(t.score/1e3+n)},0);return{name:e,score:n,scorePercent:n/t.length*100,winRate:t.filter(function(e){return 1===e.rank}).length/t.length*100,first:t.filter(function(e){return 1===e.rank}).length,second:t.filter(function(e){return 2===e.rank}).length,third:t.filter(function(e){return 3===e.rank}).length,fourth:t.filter(function(e){return 4===e.rank}).length,playCount:t.length}}):Object.keys(o).map(function(e){var n=o[e],a=t.find(function(t){return t.name===e});return{name:e,rating:a?a.rating:1e3,average:n.reduce(function(e,t){return e+parseInt(t.score)},0)/n.length,winRate:n.filter(function(e){return 1===e.rank}).length/n.length*100,playCount:n.length}})},a._generateHistoryTable=function(){var e=a.props;e.gameResult;return"mahjong"===e.game.type?r.a.createElement(W,{gameResult:a._calculateGameResult()}):r.a.createElement(B,{gameResult:a._calculateGameResult()})},n))}return y()(t,e),m()(t,[{key:"componentDidMount",value:function(){this.props.fetchRecord(this.props.game.originalName)}},{key:"componentDidUpdate",value:function(e,t,n){this.props.game!==e.game&&this.props.fetchRecord(this.props.game.originalName)}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(x.a,{className:e.root},this._generateHistoryTable())}}]),t}(r.a.Component);L.propTypes={classes:b.a.object.isRequired};var Y=Object(E.withStyles)(function(e){return{root:{width:"100%"},tableWrapper:{overflowX:"auto"}}})(L),V={fetchRecord:n(130).b},X=Object(c.connect)(function(e){return{game:e.app.game,records:e.gameHistory.records,gameResult:e.gameHistory.gameResult,ratings:e.gameHistory.ratings}},V)(Y),J=n(9),K=n.n(J),Q=(n(519),n(3)),Z=function(e){function t(){var e,n,a;l()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return d()(a,(n=a=d()(this,(e=h()(t)).call.apply(e,[this].concat(o))),a.state={name:"",error:!1},a._handleChange=function(e){return function(t){a.setState(K()({},e,t.target.value))}},a._submit=function(){a.props.addUser(a.state.name).then(function(){alert("".concat(a.state.name," 님 등록되셨습니다.")),a.setState({name:"",error:!1})}).catch(function(e){return a.setState({error:!0})})},n))}return y()(t,e),m()(t,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("section",{className:"game-history"},r.a.createElement("p",{className:"warning"},r.a.createElement("span",null,"[주의]"),r.a.createElement("br",null),r.a.createElement("span",null,"닉네임은 한번 정하면 원칙적으로 변경이 불가능 합니다."),r.a.createElement("br",null),r.a.createElement("span",null,"또한 1인 1아이디 원칙이며 재생성이 불가능 합니다."),r.a.createElement("br",null),r.a.createElement("span",null,"충분히 생각해 보시고 입력하시기 바랍니다."),r.a.createElement("br",null)),r.a.createElement(Q.s,{autoFocus:!0,label:"아이디",value:this.state.name,onChange:this._handleChange("name"),error:this.state.error}),r.a.createElement("br",null),this.state.error&&r.a.createElement(Q.i,{error:this.state.error},"등록된 아이디입니다."),r.a.createElement("br",null),r.a.createElement(Q.b,{className:"submit-btn",variant:"contained",color:"primary",onClick:this._submit},"등록하기"))}}]),t}(a.PureComponent),$=n(19),ee=n.n($),te=n(29),ne=n.n(te),ae=n(75),re="ADD_USER";K()({},re,function(){});var oe={addUser:function(e){return function(){var t=ne()(ee.a.mark(function t(n){return ee.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ae.a.fetchUserByName(e);case 2:if(t.sent.exists){t.next=9;break}return t.next=6,ae.a.addUser(e);case 6:n({type:re}),t.next=10;break;case 9:throw"등록된 이름입니다.";case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},ie=Object(c.connect)(function(e){return{}},oe)(Z),ce=(n(521),{input:{display:"none"},textField:{margin:5},personForm:{display:"flex",flexDirection:"row",alignItems:"center"},personInput:{width:30}}),se=function(e){function t(){var e,n,a;l()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return d()(a,(n=a=d()(this,(e=h()(t)).call.apply(e,[this].concat(o))),a.state={name:"",originalName:"",min:2,max:4,bid:!1,clan:!1,mahjong:!1,rating:!1,thumbnail:null,error:!1},a._handleChange=function(e){return function(t){a.setState(K()({},e,t.target.value))}},a._uploadFile=function(e){a.setState({thumbnail:e.target.files[0]})},a._submit=function(){var e=a.state,t=e.name,n=e.originalName,r=e.min,o=e.max,i=e.bid,c=e.clan,s=e.thumbnail,l=e.mahjong,u=e.rating;if(null===s)return alert("이미지를 등록해주세요");a.props.addGame({name:t,originalName:n,min:r,max:o,bid:i,clan:c,mahjong:l,rating:u},s).then(function(){alert("".concat(a.state.name," 등록 완료")),a.setState({name:"",error:!1})}).catch(function(e){console.log(e),a.setState({error:!0})})},n))}return y()(t,e),m()(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"game-history"},r.a.createElement("p",{className:"warning"},r.a.createElement("span",null,"실수로 등록한 경우 관리자에게 말해주세요.")),r.a.createElement(Q.s,{autoFocus:!0,label:"게임 이름",value:this.state.name,onChange:this._handleChange("name"),error:this.state.error,style:ce.textField}),r.a.createElement("br",null),r.a.createElement(Q.s,{label:"영문 이름",value:this.state.originalName,onChange:this._handleChange("originalName"),style:ce.textField}),r.a.createElement("br",null),r.a.createElement(Q.h,{style:ce.personForm},"게임 인원 :",r.a.createElement(Q.k,{type:"number",value:this.state.min,onChange:this._handleChange("min"),style:ce.personInput,input:{textAlign:"center"}}),"~",r.a.createElement(Q.k,{type:"number",value:this.state.max,onChange:this._handleChange("max"),style:ce.personInput})),r.a.createElement("br",null),r.a.createElement("input",{accept:"image/*",style:ce.input,id:"contained-button-file",onChange:this._uploadFile,multiple:!0,type:"file"}),r.a.createElement("label",{htmlFor:"contained-button-file"},r.a.createElement(Q.b,{variant:"contained",component:"span"},"Upload"),this.state.thumbnail&&this.state.thumbnail.name),r.a.createElement("br",null),this.state.error&&r.a.createElement(Q.i,{error:this.state.error},"등록된 게임입니다."),r.a.createElement("br",null),r.a.createElement(Q.b,{className:"submit-btn",variant:"contained",color:"primary",onClick:this._submit},"등록하기"))}}]),t}(a.PureComponent),le=n(34),ue="ADD_GAME";var me={addGame:function(e,t){return function(){var n=ne()(ee.a.mark(function n(a){return ee.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,le.a.fetchGameByName(e.name);case 2:if(n.sent.exists){n.next=9;break}return n.next=6,le.a.addGame(e,t);case 6:a({type:ue}),n.next=10;break;case 9:throw"등록된 게임입니다.";case 10:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()}},pe=Object(c.connect)(function(e){return{}},me)(se),de=n(72),fe=n.n(de),he=n(289),ge=n.n(he),ye=(n(620),n(23)),ve=n(135),be=n(121),Ee={1:{name:"",score:0},2:{name:"",score:0},3:{name:"",score:0},4:{name:"",score:0}},we=function(e){function t(){var e,n,a;l()(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return d()(a,(n=a=d()(this,(e=h()(t)).call.apply(e,[this].concat(i))),a.state={players:Ee,playerCount:Object.keys(Ee).length},a.onProduce=function(e){a.setState(Object(ye.a)(a.state,e))},a._inputPlayerRecord=function(e,t){return function(n){a.onProduce(function(a){a.players[e][t]=n.target.value})}},a._addPlayer=function(){a.onProduce(function(e){e.playerCount=a.state.playerCount+1,e.players[e.playerCount]={name:"",score:0}})},a._removePlayer=function(){a.onProduce(function(e){delete e.players[e.playerCount],e.playerCount=a.state.playerCount-1})},a._onSave=function(){a.props.onSave(a.state.players)},a._renderSelector=function(e,t,n,o){return r.a.createElement(Q.h,{className:a.props.classes.textField},r.a.createElement(Q.l,null,t),r.a.createElement(Q.r,{value:a.state.players[e][o],onChange:a._inputPlayerRecord(e,o)},n.map(function(e){return r.a.createElement(Q.p,{value:e.name,key:e.name},e.name)})))},n))}return y()(t,e),m()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.users,a=t.classes;return r.a.createElement("section",{className:"recode-game"},Object.keys(this.state.players).map(function(t){return r.a.createElement(Q.q,{className:a.paper,key:t},r.a.createElement("div",null,t),e._renderSelector(t,"이름",n,"name"),r.a.createElement(Q.s,{className:a.textField,label:"점수",onChange:e._inputPlayerRecord(t,"score"),type:"number"}))}),r.a.createElement(Q.j,{onClick:this._addPlayer},r.a.createElement("i",{className:"mdi mdi-plus"})),r.a.createElement(Q.j,{onClick:this._removePlayer,disabled:this.state.playerCount<=1},r.a.createElement("i",{className:"mdi mdi-minus"})),r.a.createElement("br",null),r.a.createElement(Q.b,{className:a.button,variant:"contained",color:"primary",onClick:this._onSave},"기록"),r.a.createElement(Q.b,{variant:"contained",component:be.a,to:"/recordGame",color:"primary",onClick:function(){return e.props.selectGame(game.originalName)}},"취소"))}}]),t}(a.PureComponent);we.propTypes={onSave:b.a.func};var xe=Object(E.withStyles)(function(e){return{button:{margin:e.spacing.unit},paper:{padding:e.spacing.unit,margin:e.spacing.unit},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,minWidth:100,maxWidth:200}}})(we),ke={1:{name:"",clan:"",score:0,bid:0},2:{name:"",clan:"",score:0,bid:0},3:{name:"",clan:"",score:0,bid:0},4:{name:"",clan:"",score:0,bid:0}},Ce=function(e){function t(){var e,n,a;l()(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return d()(a,(n=a=d()(this,(e=h()(t)).call.apply(e,[this].concat(i))),a.state={players:ke,playerCount:Object.keys(ke).length},a.onProduce=function(e){a.setState(Object(ye.a)(a.state,e))},a._inputPlayerRecord=function(e,t){return function(n){a.onProduce(function(a){a.players[e][t]=n.target.value})}},a._addPlayer=function(){a.onProduce(function(e){e.playerCount=a.state.playerCount+1,e.players[e.playerCount]={name:"",score:0}})},a._removePlayer=function(){a.onProduce(function(e){delete e.players[e.playerCount],e.playerCount=a.state.playerCount-1})},a._onSave=function(){a.props.onSave(a.state.players)},a._renderSelector=function(e,t,n,o){return r.a.createElement(Q.h,{className:a.props.classes.textField},r.a.createElement(Q.l,null,t),r.a.createElement(Q.r,{value:a.state.players[e][o],onChange:a._inputPlayerRecord(e,o)},n.map(function(e){return r.a.createElement(Q.p,{value:e.name,key:e.name},e.name)})))},n))}return y()(t,e),m()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.users,a=t.clans,o=t.game,i=t.classes,c=t.bid;return r.a.createElement("section",{className:"recode-game"},Object.keys(this.state.players).map(function(t){return r.a.createElement(Q.q,{className:i.paper,key:t},r.a.createElement("div",null,t),e._renderSelector(t,"이름",n,"name"),e._renderSelector(t,"종족",a,"clan"),r.a.createElement(Q.s,{className:i.textField,label:"점수",onChange:e._inputPlayerRecord(t,"score"),type:"number"}),c&&r.a.createElement(Q.s,{className:i.textField,label:"비딩",onChange:e._inputPlayerRecord(t,"bidding"),type:"number"}))}),r.a.createElement(Q.j,{onClick:this._addPlayer,disabled:this.state.playerCount>=o.max},r.a.createElement("i",{className:"mdi mdi-plus"})),r.a.createElement(Q.j,{onClick:this._removePlayer,disabled:this.state.playerCount<=o.min},r.a.createElement("i",{className:"mdi mdi-minus"})),r.a.createElement("br",null),r.a.createElement(Q.b,{className:i.button,variant:"contained",color:"primary",onClick:this._onSave},"기록"),r.a.createElement(Q.b,{variant:"contained",component:be.a,to:"/recordGame",color:"primary",onClick:function(){return e.props.selectGame(o.originalName)}},"취소"))}}]),t}(a.PureComponent);Ce.propTypes={onSave:b.a.func,clans:b.a.array.isRequired,bid:b.a.bool};var Re=Object(E.withStyles)(function(e){return{button:{margin:e.spacing.unit},paper:{padding:e.spacing.unit,margin:e.spacing.unit},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,minWidth:100,maxWidth:200}}})(Ce),_e=["동장","남장(반장)","서장","북장(전장)"],Se={1:{displayName:"동",name:"",score:0},2:{displayName:"남",name:"",score:0},3:{displayName:"서",name:"",score:0},4:{displayName:"북",name:"",score:0}},Ne=function(e){function t(){var e,n,a;l()(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return d()(a,(n=a=d()(this,(e=h()(t)).call.apply(e,[this].concat(i))),a.state={players:Se,gameType:"남장(반장)",playerCount:Object.keys(Se).length,errorMsg:""},a.onProduce=function(e){a.setState(Object(ye.a)(a.state,e))},a._inputPlayerRecord=function(e,t){return function(n){a.onProduce(function(a){a.players[e][t]=n.target.value})}},a._addPlayer=function(){a.onProduce(function(e){e.playerCount=a.state.playerCount+1,e.players[e.playerCount]={name:"",score:0}})},a._removePlayer=function(){a.onProduce(function(e){delete e.players[e.playerCount],e.playerCount=a.state.playerCount-1})},a._onSave=function(){var e=Object.values(a.state.players).reduce(function(e,t){return e+parseInt(t.score)},0);0===e?a.props.onSave(a.state.players):a.setState({errorMsg:"총합 : ".concat(e," 점수를 확인해 주세요")})},a._renderSelector=function(e,t,n,o){return r.a.createElement(Q.h,{className:a.props.classes.textField},r.a.createElement(Q.l,null,t),r.a.createElement(Q.r,{value:a.state.players[e][o],onChange:a._inputPlayerRecord(e,o)},n.map(function(e){return r.a.createElement(Q.p,{value:e.name,key:e.name},e.name)})))},n))}return y()(t,e),m()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.users,a=t.classes;return r.a.createElement("section",{className:"recode-game"},r.a.createElement(Q.r,{className:a.textField,value:this.state.gameType,onChange:function(t){return e.setState({gameType:t.target.value})}},_e.map(function(e){return r.a.createElement(Q.p,{value:e,key:e},e)})),Object.keys(this.state.players).map(function(t){return r.a.createElement(Q.q,{className:a.paper,key:t},r.a.createElement("div",null,e.state.players[t].displayName),e._renderSelector(t,"이름",n,"name"),r.a.createElement(Q.s,{className:a.textField,label:"점수",onChange:e._inputPlayerRecord(t,"score"),type:"number"}))}),r.a.createElement(Q.j,{onClick:this._addPlayer},r.a.createElement("i",{className:"mdi mdi-plus"})),r.a.createElement(Q.j,{onClick:this._removePlayer,disabled:this.state.playerCount<=1},r.a.createElement("i",{className:"mdi mdi-minus"})),r.a.createElement("br",null),""!==this.state.errorMsg&&r.a.createElement("p",{className:"warning"},r.a.createElement("span",null,this.state.errorMsg)),r.a.createElement(Q.b,{className:a.button,variant:"contained",color:"primary",onClick:this._onSave},"기록"),r.a.createElement(Q.b,{variant:"contained",component:be.a,to:"/recordGame",color:"primary",onClick:function(){return e.props.selectGame(game.originalName)}},"취소"))}}]),t}(a.PureComponent);Ne.propTypes={onSave:b.a.func};var je=Object(E.withStyles)(function(e){return{button:{margin:e.spacing.unit},paper:{padding:e.spacing.unit,margin:e.spacing.unit},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,minWidth:100,maxWidth:200}}})(Ne),Pe={1:{name:"",score:0},2:{name:"",score:0},3:{name:"",score:0},4:{name:"",score:0}},Oe=16;function Ge(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Oe,r=1/(1+Math.pow(10,(t-e)/400));return parseInt(a*(n-r))}var Ae=function(e){function t(){var e,n,a;l()(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return d()(a,(n=a=d()(this,(e=h()(t)).call.apply(e,[this].concat(i))),a.state={game:a.props.game,players:Pe,playerCount:Object.keys(Pe).length},a.onProduce=function(e){a.setState(Object(ye.a)(a.state,e))},a._onSelectGame=function(e){a.onProduce(function(t){t.game=a.props.games.find(function(t){return t.originalName===e.target.value})})},a._onSaveRecord=function(e){var t=ge()(Object.values(e),function(e){return parseInt(e.score)}).reverse().map(function(e,t){return fe()({},e,{rank:t+1})}),n=a.calculateResultRating(t),r={game:a.state.game.originalName,players:e,gameResult:t};a.props.requestSaveRecord(r,n).then(function(e){alert("저장 완료"),a.props.selectGame(a.state.game.originalName),a.props.history.push("/gameHistory")})},a._generateRecord=function(e){var t=a.props.users;return e.clan?r.a.createElement(Re,{game:e,clans:e.clans,bid:e.bid,users:t,onSave:a._onSaveRecord}):e.mahjong?r.a.createElement(je,{game:e,users:t,onSave:a._onSaveRecord}):r.a.createElement(xe,{game:e,users:t,onSave:a._onSaveRecord})},n))}return y()(t,e),m()(t,[{key:"componentDidMount",value:function(){Promise.all([this.props.fetchUser(),this.props.fetchRating(this.props.game.originalName)])}},{key:"calculateResultRating",value:function(e){for(var t=this.props.ratings,n=e.map(function(e){var n=t.find(function(t){return t.name===e.name});return{name:e.name,rating:n?n.rating:1e3,updated:getTime()}}),a=0;a<n.length;a++){for(var r=0,o=n[a],i=0;i<n.length;i++){var c=n[i];if(a!==i){var s=void 0;e[a].score>e[i].score&&(s=1),e[a].score<e[i].score&&(s=0),e[a].score===e[i].score&&(s=.5),r+=Ge(o.rating,c.rating,s)}}o.nextRating=o.rating+r}return n.map(function(e){return e.rating=e.nextRating,delete e.nextRating,e})}},{key:"render",value:function(){var e=this.props.games;return r.a.createElement("section",{className:"recode-game"},this.state.game&&r.a.createElement(ve.a,{games:e,value:this.state.game.originalName,onChange:this._onSelectGame}),this.state.game&&this._generateRecord(this.state.game))}}]),t}(a.PureComponent),Te=n(74),Me=n(40),Fe={requestSaveRecord:Te.d,fetchUser:Te.c,selectGame:Me.d,fetchRating:Te.b},ze=Object(c.connect)(function(e){return{games:e.app.games,game:e.app.game,users:e.recordGame.users,ratings:e.recordGame.ratings}},Fe)(Ae),qe=(n(622),function(e){function t(){var e,n,a;l()(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return d()(a,(n=a=d()(this,(e=h()(t)).call.apply(e,[this].concat(i))),a.state={},a.onProduce=function(e){a.setState(Object(ye.a)(a.state,e))},a._generateGameCard=function(e){return r.a.createElement(Q.c,{key:e.originalName,className:"game-card"},r.a.createElement(Q.e,{title:e.name}),r.a.createElement(Q.d,null,r.a.createElement(Q.b,{component:be.a,to:"/gameHistory",size:"small",color:"primary",onClick:function(){return a.props.selectGame(e.originalName)}},"게임통계"),r.a.createElement(Q.b,{component:be.a,to:"/recordGame",size:"small",color:"primary",onClick:function(){return a.props.selectGame(e.originalName)}},"점수기록")),r.a.createElement(Q.f,{component:"img",src:e.thumbnail}))},n))}return y()(t,e),m()(t,[{key:"render",value:function(){var e=this.props.games;return r.a.createElement("section",{className:"boke-game-list"},e.map(this._generateGameCard))}}]),t}(a.PureComponent)),Be=n(36).a.collection("records"),De=function(){function e(){l()(this,e)}return m()(e,null,[{key:"recordGame",value:function(e){var t=getTime();return e.createAt=t,Be.doc("".concat(t,":").concat(e.gameResult[0].name)).set(e)}},{key:"fetchGameRecord",value:function(){return Be.get()}}]),e}(),Ie="SAVE_RECORD";K()({},Ie,Object(ye.a)(function(e,t){}));var He={requestSaveRecord:function(e){return function(){var t=ne()(ee.a.mark(function t(n){return ee.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,De.recordGame(e);case 2:n({type:Ie});case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},selectGame:Me.d},Ue=Object(c.connect)(function(e){return{games:e.app.games}},He)(qe);n.d(t,"createRoutes",function(){return We});var We=function(e){return r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(o.a,null,r.a.createElement(i.a,{exact:!0,path:"/",component:Ue}),r.a.createElement(i.a,{exact:!0,path:"/gameHistory",component:X}),r.a.createElement(i.a,{exact:!0,path:"/registryUser",component:ie}),r.a.createElement(i.a,{exact:!0,path:"/registryGame",component:pe}),r.a.createElement(i.a,{exact:!0,path:"/recordGame",component:ze}),r.a.createElement(i.a,{component:Le})))},Le=function(e){var t=e.location;return r.a.createElement("div",null,r.a.createElement("h3",null,"페이지를 찾을 수 없습니다 ",r.a.createElement("code",null,t.pathname)))};t.default=We},677:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(22),i=n.n(o),c=n(15),s=n.n(c),l=n(185),u=n.n(l),m=n(42),p=n(285),d=n(40),f=n(130),g=n(74),y=Object(m.combineReducers)({app:d.a,gameHistory:f.a,recordGame:g.a}),v=n(5),b=n.n(v),E=n(6),w=n.n(E),x=n(4),k=n.n(x),C=n(10),R=n.n(C),_=n(11),S=n.n(_),N=n(31),j=n(131),P=n(121),O=n(132),G=n(3),A=n(122),T=n(17),M=n(135),F=Object(T.withStyles)(function(e){return{appBar:{height:48,zIndex:e.zIndex.drawer+1},header:{margin:0}}})(function(e){var t=e.classes,n=e.title;return r.a.createElement(G.a,{position:"relative",color:"primary",className:t.appBar},r.a.createElement("h2",{className:t.header,onClick:e.onClick},r.a.createElement(P.a,{style:{color:"white"},to:"/"},"보드케이브")),n&&r.a.createElement("h5",{className:t.header},n.name))}),z=Object(T.createMuiTheme)({palette:{primary:A.blue}}),q=function(e){function t(){var e,n,a;b()(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return k()(a,(n=a=k()(this,(e=R()(t)).call.apply(e,[this].concat(o))),a._onSelectGame=function(e){a.props.selectGame(e.target.value)},n))}return S()(t,e),w()(t,[{key:"componentDidMount",value:function(){this.props.fetchGames()}},{key:"render",value:function(){var e=this.props,t=e.routes,n=e.store,a=e.classes,o=e.games,i=e.game;return r.a.createElement(T.MuiThemeProvider,{theme:z},r.a.createElement(N.Provider,{store:n},r.a.createElement(j.a,null,r.a.createElement("div",{className:a.root},r.a.createElement(F,{title:i,onClick:this.props.resetGame}),null!==i&&r.a.createElement(G.g,{open:!1,variant:"permanent",classes:{paper:a.drawerPaper}},r.a.createElement(M.a,{games:o,value:i.originalName,onChange:this._onSelectGame}),r.a.createElement(G.m,null,r.a.createElement(G.n,{button:!0,component:P.a,to:"/gameHistory"},r.a.createElement(G.o,{primary:"기록통계"})),r.a.createElement(G.n,{button:!0,component:P.a,to:"/recordGame"},r.a.createElement(G.o,{primary:"기록입력"})),r.a.createElement(G.n,{button:!0},r.a.createElement(G.o,{primary:"이번의 상 현황"})),r.a.createElement(G.n,{button:!0,component:P.a,to:"/registryUser"},r.a.createElement(G.o,{primary:"사용자 등록"})),r.a.createElement(G.n,{button:!0,component:P.a,to:"/registryGame"},r.a.createElement(G.o,{primary:"게임 등록"})),r.a.createElement(G.n,{button:!0},r.a.createElement(G.o,{primary:"후원입력"})))),r.a.createElement("div",{className:a.content},null===i&&"#/"!==location.hash?r.a.createElement(O.a,{to:"/"}):t)))))}}]),t}(a.Component),B=Object(T.withStyles)(function(e){return{appBar:{height:48,zIndex:e.zIndex.drawer+1},drawerPaper:{position:"relative",height:"calc(100vh - 48px)"},root:{flexGrow:1,zIndex:1,overflow:"hidden",position:"relative",display:"flex",height:"100vh",flexWrap:"wrap"},content:{display:"flex",flex:1,flexGrow:1,padding:2*e.spacing.unit,backgroundColor:e.palette.background.default,minWidth:150,overflow:"auto",height:"calc(100% - 48px)"},toolbar:e.mixins.toolbar}})(q),D=Object(N.connect)(function(e){return{games:e.app.games,game:e.app.game}},{fetchGames:d.b,selectGame:d.d,resetGame:d.c})(B),I=(n(509),n(65)),H=n.n(I),U=n(120),W=n.n(U);Array.prototype.flatten=function(){return[].concat.apply([],this)},Array.prototype.flatMap=function(e){return Array.prototype.concat.apply([],this.map(e))},Array.prototype.groupBy=function(e){return this.reduce(function(t,n,a){var r=e(n,a);return t[r]?t[r].push(n):t[r]=[n],t},{})},Array.prototype.groupSize=function(e){for(var t=[],n=0;n<this.length;n+=e)t.push(this.slice(n,n+e));return t},Array.prototype.joinWithElement=function(e){return"function"==typeof e?this.flatMap(function(t,n,a){return n===a.length-1?[t]:[t,e(n)]}):this.flatMap(function(t,n,a){return n===a.length-1?[t]:[t,e]})},Array.prototype.distinctBy=function(e){var t={},n=[];return this.forEach(function(a){var r=e(a);t[r]||(n.push(a),t[r]=!0)}),n},Array.prototype.sum=function(e){return"function"==typeof e?this.map(e).reduce(function(e,t){return e+t},0):this.reduce(function(e,t){return e+t},0)},Array.prototype.range=function(e,t,n){t/=n=n||1;for(var a=e;a<=t;a++)this.push(a*n);return this},Array.prototype.max=function(e){if(0!==this.length){var t=0,n=e(this[t]);return this.forEach(function(a,r){var o=e(a);n<o&&(n=o,t=r)}),{item:this[t],index:t,value:n}}},Array.prototype.repeat=function(e){for(var t=W()(this);e-- >0;)t=t.concat(this);return t},Array.prototype.sortBy=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.length;return this.sort(function(e,n){for(var r=0,o=0;0===o&&r<a;){var i=t[r];o=i instanceof Function?Y(i(e),i(n)):Y(e[i],n[i]),r++}return o})},Array.prototype.maxValue=function(){return this.reduce(function(e,t){return Math.max(e,t)},this[0])},Array.prototype.minValue=function(){return this.reduce(function(e,t){return Math.min(e,t)},this[0])};var L={string:function(e,t){return e&&t?e.localeCompare(t):0},number:function(e,t){return e-t}},Y=function(e,t){return L[H()(e)](e,t)};Date.prototype.format=function(e){if(!this.valueOf())return"";var t=this;return e.replace(/(yyyy|yy|MM|dd|E|hh|mm|ss|a\/p)/gi,function(e){switch(e){case"YYYY":case"yyyy":return t.getFullYear();case"yy":return(t.getFullYear()%1e3).zf(2);case"MM":return(t.getMonth()+1).zf(2);case"DD":case"dd":return t.getDate().zf(2);case"E":return["일요일","월요일","화요일","수요일","목요일","금요일","토요일"][t.getDay()];case"HH":return t.getHours().zf(2);case"hh":return((h=t.getHours()%12)?h:12).zf(2);case"mm":return t.getMinutes().zf(2);case"ss":return t.getSeconds().zf(2);case"a/p":return t.getHours()<12?"오전":"오후";default:return e}})},Date.prototype.termText=function(){var e=~~(((new Date).getTime()-this.getTime())/1e3),t=~~(e/60)%60,n=~~(e/3600)%24,a=~~(e/3600/24),r=~~(a/7),o=~~(a/365);return o>=1?["".concat(o),"년전",6]:a>=7?["".concat(r),"주전",5]:a>1?["".concat(a),"일전",4]:0<a&&a<=1?["","어제",3]:n>0?["".concat(n),"시간전",2]:t>2?["".concat(t),"분전",1]:["","방금전",0]},String.prototype.zf=function(e){return"0".repeat(e-this.length)+this},Number.prototype.zf=function(e){return this.toString().zf(e)},Math.clamp=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return isFinite(e)?Math.max(t,Math.min(e,n)):a},window.isMobileDevice=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},window._isChrome=null,window.isChrome=function(){if(!window._isChrome){var e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);window._isChrome={isChrome:!!(e&&e[0]&&e[0].indexOf("Chrome")>=0)}}return window._isChrome.isChrome},window.getTime=function(){return(new Date).getTime()};var V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[p.a],n=m.compose,a=Object(m.createStore)(y,e,n.apply(void 0,[m.applyMiddleware.apply(void 0,t)].concat([])));return a.asyncReducers={},a}(window.__INITIAL_STATE__),X=document.getElementById("root");s.a.locale("ko-kr"),function(){var e=n(676).default(V);u.a.setAppElement("body"),i.a.render(r.a.createElement(D,{store:V,routes:e}),X)}()},74:function(e,t,n){"use strict";n.d(t,"d",function(){return g}),n.d(t,"c",function(){return y}),n.d(t,"b",function(){return v});var a,r=n(9),o=n.n(r),i=n(19),c=n.n(i),s=n(29),l=n.n(s),u=n(23),m=n(34),p=n(75),d=(n(193),"SAVE_RECORD"),f="FETCH_USER",h="FETCH_RATING";function g(e,t){return function(){var n=l()(c.a.mark(function n(a){return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.a.recordGame(e);case 3:return n.next=5,p.a.recordGame(e);case 5:return n.next=7,m.a.updateRating(e.game,t);case 7:a({type:d}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:case"end":return n.stop()}},n,this,[[0,10]])}));return function(e){return n.apply(this,arguments)}}()}function y(){return function(){var e=l()(c.a.mark(function e(t){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.fetchUser();case 3:n=e.sent,t({type:f,users:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()}function v(e){return function(){var t=l()(c.a.mark(function t(n){var a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.fetchRating(e);case 3:a=t.sent,n({type:h,ratings:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()}var b=(a={},o()(a,d,Object(u.a)(function(e,t){})),o()(a,f,Object(u.a)(function(e,t){e.users=t.users})),o()(a,h,Object(u.a)(function(e,t){e.ratings=t.ratings})),a),E={users:[],ratings:[]};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,n=b[t.type];return n?n(e,t):e}},75:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(5),r=n.n(a),o=n(6),i=n.n(o),c=n(36),s=c.a.collection("users"),l=c.a.batch(),u=function(){function e(){r()(this,e)}return i()(e,null,[{key:"addUser",value:function(e){return s.doc(e).set({name:e,createdAt:getTime()})}},{key:"fetchUser",value:function(){return s.get().then(function(e){return e.docs.map(function(e){return e.data()})})}},{key:"fetchUserByName",value:function(e){return s.doc(e).get()}},{key:"recordGame",value:function(e){var t=getTime();return e.createAt=t,e.gameResult.map(function(n){var a=s.doc(n.name).collection("records").doc("".concat(t,":").concat(e.game));l.set(a,e)}),l.commit()}}]),e}()}});